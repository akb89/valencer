{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,UAAU,CACb,QADa,EAEb,GAFa,CAAd;;AAKA,IAAI,WAAW,EAAf;;AAEA,IAAI,eAAe;AAClB,IAAG,CADe;AAElB,IAAG,EAFe;AAGlB,IAAG,EAHe;AAIlB,IAAG,EAJe;AAKlB,IAAG,EALe;AAMlB,IAAG,EANe;AAOlB,IAAG,EAPe;AAQlB,IAAG,EARe;AASlB,KAAI,EATc;AAUlB,KAAI,EAVc;AAWlB,KAAI,EAXc;AAYlB,KAAI,EAZc;AAalB,KAAI,EAbc;AAclB,KAAI,EAdc;AAelB,KAAI,EAfc;AAgBlB,KAAI,EAhBc;AAiBlB,KAAI,EAjBc;AAkBlB,KAAI,EAlBc;AAmBlB,KAAI,EAnBc;AAoBlB,KAAI,EApBc;AAqBlB,KAAI,EArBc;AAsBlB,KAAI,EAtBc;AAuBlB,KAAI,EAvBc;AAwBlB,KAAI,EAxBc;AAyBlB,KAAI;AAzBc,CAAnB;;AA4BA,SAAS,QAAT,CAAkB,IAAlB,EAAwB;AACvB,QAAO,QAAQ,CAAR,IAAa,GAAb,GAAmB,IAAnB,GAA0B,GAAjC;AACA;;AAED,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,KAAf,EAAsB,GAAtB,EAA2B;AAC3C,OAAM,OAAO,IAAI,MAAjB;AACA,KAAI,eAAe,KAAnB;AACA,KAAI,UAAJ;AACA,KAAI,UAAU,CAAd;AACA,KAAI,SAAS,EAAb;;AAEA,MAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,MAAxB,EAAgC,GAAhC,EAAqC;AACpC,MAAI,aAAa,KAAjB;AACA,MAAI,IAAI,IAAI,CAAJ,CAAR;;AAEA,MAAI,QAAQ,OAAR,CAAgB,CAAhB,MAAuB,CAAC,CAA5B,EAA+B;AAC9B,kBAAe,IAAf;AACA,OAAI,OAAO,aAAa,IAAb,CAAkB,IAAI,KAAJ,CAAU,CAAV,EAAa,IAAI,CAAjB,CAAlB,CAAX;AACA,gBAAa,SAAS,QAAT,GAAoB,IAApB,GAA2B,IAAxC;AACA,GAJD,MAIO,IAAI,gBAAgB,MAAM,GAA1B,EAA+B;AACrC,kBAAe,KAAf;AACA,gBAAa,IAAb;AACA;;AAED,MAAI,CAAC,YAAD,IAAiB,CAAC,UAAtB,EAAkC;AACjC,KAAE,OAAF;AACA;;AAED,MAAI,UAAU,KAAV,IAAmB,WAAW,GAAlC,EAAuC;AACtC,aAAU,CAAV;AACA,GAFD,MAEO,IAAI,YAAY,KAAZ,IAAqB,eAAe,SAApC,IAAiD,eAAe,QAApE,EAA8E;AACpF,aAAU,SAAS,UAAT,CAAV;AACA,GAFM,MAEA,IAAI,WAAW,GAAf,EAAoB;AAC1B,OAAI,eAAe,SAAnB,EAA8B;AAC7B,cAAU,SAAS,aAAa,UAAb,KAA4B,QAArC,CAAV;AACA;AACD;AACA;AACD;;AAED,QAAO,MAAP;AACA,CArCD","file":"index-compiled.js","sourcesContent":["'use strict';\n\nvar ESCAPES = [\n\t'\\u001b',\n\t'\\u009b'\n];\n\nvar END_CODE = 39;\n\nvar ESCAPE_CODES = {\n\t0: 0,\n\t1: 22,\n\t2: 22,\n\t3: 23,\n\t4: 24,\n\t7: 27,\n\t8: 28,\n\t9: 29,\n\t30: 39,\n\t31: 39,\n\t32: 39,\n\t33: 39,\n\t34: 39,\n\t35: 39,\n\t36: 39,\n\t37: 39,\n\t90: 39,\n\t40: 49,\n\t41: 49,\n\t42: 49,\n\t43: 49,\n\t44: 49,\n\t45: 49,\n\t46: 49,\n\t47: 49\n};\n\nfunction wrapAnsi(code) {\n\treturn ESCAPES[0] + '[' + code + 'm';\n}\n\nmodule.exports = function (str, begin, end) {\n\tend = end || str.length;\n\tvar insideEscape = false;\n\tvar escapeCode;\n\tvar visible = 0;\n\tvar output = '';\n\n\tfor (var i = 0; i < str.length; i++) {\n\t\tvar leftEscape = false;\n\t\tvar x = str[i];\n\n\t\tif (ESCAPES.indexOf(x) !== -1) {\n\t\t\tinsideEscape = true;\n\t\t\tvar code = /[0-9][^m]*/.exec(str.slice(i, i + 4));\n\t\t\tescapeCode = code === END_CODE ? null : code;\n\t\t} else if (insideEscape && x === 'm') {\n\t\t\tinsideEscape = false;\n\t\t\tleftEscape = true;\n\t\t}\n\n\t\tif (!insideEscape && !leftEscape) {\n\t\t\t++visible;\n\t\t}\n\n\t\tif (visible > begin && visible <= end) {\n\t\t\toutput += x;\n\t\t} else if (visible === begin && escapeCode !== undefined && escapeCode !== END_CODE) {\n\t\t\toutput += wrapAnsi(escapeCode);\n\t\t} else if (visible >= end) {\n\t\t\tif (escapeCode !== undefined) {\n\t\t\t\toutput += wrapAnsi(ESCAPE_CODES[escapeCode] || END_CODE);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn output;\n};\n\n"]}