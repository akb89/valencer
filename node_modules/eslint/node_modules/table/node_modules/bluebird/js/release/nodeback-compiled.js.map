{"version":3,"sources":["nodeback.js"],"names":[],"mappings":"AAAA;;AACA,IAAI,OAAO,QAAQ,QAAR,CAAX;AACA,IAAI,mBAAmB,KAAK,gBAA5B;AACA,IAAI,SAAS,QAAQ,UAAR,CAAb;AACA,IAAI,mBAAmB,OAAO,gBAA9B;AACA,IAAI,MAAM,QAAQ,OAAR,CAAV;;AAEA,SAAS,cAAT,CAAwB,GAAxB,EAA6B;AACzB,WAAO,eAAe,KAAf,IACH,IAAI,cAAJ,CAAmB,GAAnB,MAA4B,MAAM,SADtC;AAEH;;AAED,IAAI,YAAY,gCAAhB;AACA,SAAS,sBAAT,CAAgC,GAAhC,EAAqC;AACjC,QAAI,GAAJ;AACA,QAAI,eAAe,GAAf,CAAJ,EAAyB;AACrB,cAAM,IAAI,gBAAJ,CAAqB,GAArB,CAAN;AACA,YAAI,IAAJ,GAAW,IAAI,IAAf;AACA,YAAI,OAAJ,GAAc,IAAI,OAAlB;AACA,YAAI,KAAJ,GAAY,IAAI,KAAhB;AACA,YAAI,OAAO,IAAI,IAAJ,CAAS,GAAT,CAAX;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,MAAzB,EAAiC,EAAE,CAAnC,EAAsC;AAClC,gBAAI,MAAM,KAAK,CAAL,CAAV;AACA,gBAAI,CAAC,UAAU,IAAV,CAAe,GAAf,CAAL,EAA0B;AACtB,oBAAI,GAAJ,IAAW,IAAI,GAAJ,CAAX;AACH;AACJ;AACD,eAAO,GAAP;AACH;AACD,SAAK,8BAAL,CAAoC,GAApC;AACA,WAAO,GAAP;AACH;;AAED,SAAS,kBAAT,CAA4B,OAA5B,EAAqC,SAArC,EAAgD;AAC5C,WAAO,UAAS,GAAT,EAAc,KAAd,EAAqB;AACxB,YAAI,YAAY,IAAhB,EAAsB;AACtB,YAAI,GAAJ,EAAS;AACL,gBAAI,UAAU,uBAAuB,iBAAiB,GAAjB,CAAvB,CAAd;AACA,oBAAQ,iBAAR,CAA0B,OAA1B;AACA,oBAAQ,OAAR,CAAgB,OAAhB;AACH,SAJD,MAIO,IAAI,CAAC,SAAL,EAAgB;AACnB,oBAAQ,QAAR,CAAiB,KAAjB;AACH,SAFM,MAEA;AACH,gBAAI,QAAQ,UAAU,MAAtB,CAA6B,IAAI,OAAO,IAAI,KAAJ,CAAU,KAAK,GAAL,CAAS,QAAQ,CAAjB,EAAoB,CAApB,CAAV,CAAX,CAA8C,KAAI,IAAI,MAAM,CAAd,EAAiB,MAAM,KAAvB,EAA8B,EAAE,GAAhC,EAAqC;AAAC,qBAAK,MAAM,CAAX,IAAgB,UAAU,GAAV,CAAhB;AAAgC;AACjJ,oBAAQ,QAAR,CAAiB,IAAjB;AACH;AACD,kBAAU,IAAV;AACH,KAbD;AAcH;;AAED,OAAO,OAAP,GAAiB,kBAAjB","file":"nodeback-compiled.js","sourcesContent":["\"use strict\";\nvar util = require(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = require(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n"]}