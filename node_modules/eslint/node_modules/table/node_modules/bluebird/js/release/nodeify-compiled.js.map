{"version":3,"sources":["nodeify.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UAAS,OAAT,EAAkB;AACnC,QAAI,OAAO,QAAQ,QAAR,CAAX;AACA,QAAI,QAAQ,QAAQ,MAApB;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,WAAW,KAAK,QAApB;;AAEA,aAAS,aAAT,CAAuB,GAAvB,EAA4B,QAA5B,EAAsC;AAClC,YAAI,UAAU,IAAd;AACA,YAAI,CAAC,KAAK,OAAL,CAAa,GAAb,CAAL,EAAwB,OAAO,eAAe,IAAf,CAAoB,OAApB,EAA6B,GAA7B,EAAkC,QAAlC,CAAP;AACxB,YAAI,MACA,SAAS,QAAT,EAAmB,KAAnB,CAAyB,QAAQ,WAAR,EAAzB,EAAgD,CAAC,IAAD,EAAO,MAAP,CAAc,GAAd,CAAhD,CADJ;AAEA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;;AAED,aAAS,cAAT,CAAwB,GAAxB,EAA6B,QAA7B,EAAuC;AACnC,YAAI,UAAU,IAAd;AACA,YAAI,WAAW,QAAQ,WAAR,EAAf;AACA,YAAI,MAAM,QAAQ,SAAR,GACJ,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,CADI,GAEJ,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAxB,EAAkC,IAAlC,EAAwC,GAAxC,CAFN;AAGA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;AACD,aAAS,YAAT,CAAsB,MAAtB,EAA8B,QAA9B,EAAwC;AACpC,YAAI,UAAU,IAAd;AACA,YAAI,CAAC,MAAL,EAAa;AACT,gBAAI,YAAY,IAAI,KAAJ,CAAU,SAAS,EAAnB,CAAhB;AACA,sBAAU,KAAV,GAAkB,MAAlB;AACA,qBAAS,SAAT;AACH;AACD,YAAI,MAAM,SAAS,QAAT,EAAmB,IAAnB,CAAwB,QAAQ,WAAR,EAAxB,EAA+C,MAA/C,CAAV;AACA,YAAI,QAAQ,QAAZ,EAAsB;AAClB,kBAAM,UAAN,CAAiB,IAAI,CAArB;AACH;AACJ;;AAED,YAAQ,SAAR,CAAkB,UAAlB,GAA+B,QAAQ,SAAR,CAAkB,OAAlB,GAA4B,UAAU,QAAV,EACU,OADV,EACmB;AAC1E,YAAI,OAAO,QAAP,IAAmB,UAAvB,EAAmC;AAC/B,gBAAI,UAAU,cAAd;AACA,gBAAI,YAAY,SAAZ,IAAyB,OAAO,OAAP,EAAgB,MAA7C,EAAqD;AACjD,0BAAU,aAAV;AACH;AACD,iBAAK,KAAL,CACI,OADJ,EAEI,YAFJ,EAGI,SAHJ,EAII,IAJJ,EAKI,QALJ;AAOH;AACD,eAAO,IAAP;AACH,KAhBD;AAiBC,CAxDD","file":"nodeify-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n"]}