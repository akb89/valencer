{"version":3,"sources":["race.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UACb,OADa,EACJ,QADI,EACM,mBADN,EAC2B,YAD3B,EACyC;AAC1D,QAAI,OAAO,QAAQ,QAAR,CAAX;;AAEA,QAAI,YAAY,SAAZ,SAAY,CAAU,OAAV,EAAmB;AAC/B,eAAO,QAAQ,IAAR,CAAa,UAAS,KAAT,EAAgB;AAChC,mBAAO,KAAK,KAAL,EAAY,OAAZ,CAAP;AACH,SAFM,CAAP;AAGH,KAJD;;AAMA,aAAS,IAAT,CAAc,QAAd,EAAwB,MAAxB,EAAgC;AAC5B,YAAI,eAAe,oBAAoB,QAApB,CAAnB;;AAEA,YAAI,wBAAwB,OAA5B,EAAqC;AACjC,mBAAO,UAAU,YAAV,CAAP;AACH,SAFD,MAEO;AACH,uBAAW,KAAK,OAAL,CAAa,QAAb,CAAX;AACA,gBAAI,aAAa,IAAjB,EACI,OAAO,aAAa,sDAAsD,KAAK,WAAL,CAAiB,QAAjB,CAAnE,CAAP;AACP;;AAED,YAAI,MAAM,IAAI,OAAJ,CAAY,QAAZ,CAAV;AACA,YAAI,WAAW,SAAf,EAA0B;AACtB,gBAAI,cAAJ,CAAmB,MAAnB,EAA2B,CAA3B;AACH;AACD,YAAI,UAAU,IAAI,QAAlB;AACA,YAAI,SAAS,IAAI,OAAjB;AACA,aAAK,IAAI,IAAI,CAAR,EAAW,MAAM,SAAS,MAA/B,EAAuC,IAAI,GAA3C,EAAgD,EAAE,CAAlD,EAAqD;AACjD,gBAAI,MAAM,SAAS,CAAT,CAAV;;AAEA,gBAAI,QAAQ,SAAR,IAAqB,EAAE,KAAK,QAAP,CAAzB,EAA2C;AACvC;AACH;;AAED,oBAAQ,IAAR,CAAa,GAAb,EAAkB,KAAlB,CAAwB,OAAxB,EAAiC,MAAjC,EAAyC,SAAzC,EAAoD,GAApD,EAAyD,IAAzD;AACH;AACD,eAAO,GAAP;AACH;;AAED,YAAQ,IAAR,GAAe,UAAU,QAAV,EAAoB;AAC/B,eAAO,KAAK,QAAL,EAAe,SAAf,CAAP;AACH,KAFD;;AAIA,YAAQ,SAAR,CAAkB,IAAlB,GAAyB,YAAY;AACjC,eAAO,KAAK,IAAL,EAAW,SAAX,CAAP;AACH,KAFD;AAIC,CA/CD","file":"race-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n"]}