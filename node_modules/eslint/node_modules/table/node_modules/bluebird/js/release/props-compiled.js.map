{"version":3,"sources":["props.js"],"names":[],"mappings":"AAAA;;AACA,OAAO,OAAP,GAAiB,UACb,OADa,EACJ,YADI,EACU,mBADV,EAC+B,YAD/B,EAC6C;AAC9D,QAAI,OAAO,QAAQ,QAAR,CAAX;AACA,QAAI,WAAW,KAAK,QAApB;AACA,QAAI,MAAM,QAAQ,OAAR,CAAV;AACA,QAAI,MAAJ;AACA,QAAI,OAAO,GAAP,KAAe,UAAnB,EAA+B,SAAS,GAAT;;AAE/B,QAAI,eAAgB,YAAW;AAC3B,YAAI,QAAQ,CAAZ;AACA,YAAI,OAAO,CAAX;;AAEA,iBAAS,YAAT,CAAsB,KAAtB,EAA6B,GAA7B,EAAkC;AAC9B,iBAAK,KAAL,IAAc,KAAd;AACA,iBAAK,QAAQ,IAAb,IAAqB,GAArB;AACA;AACH;;AAED,eAAO,SAAS,YAAT,CAAsB,GAAtB,EAA2B;AAC9B,mBAAO,IAAI,IAAX;AACA,oBAAQ,CAAR;AACA,gBAAI,MAAM,IAAI,KAAJ,CAAU,IAAI,IAAJ,GAAW,CAArB,CAAV;AACA,gBAAI,OAAJ,CAAY,YAAZ,EAA0B,GAA1B;AACA,mBAAO,GAAP;AACH,SAND;AAOH,KAjBkB,EAAnB;;AAmBA,QAAI,eAAe,SAAf,YAAe,CAAS,OAAT,EAAkB;AACjC,YAAI,MAAM,IAAI,MAAJ,EAAV;AACA,YAAI,SAAS,QAAQ,MAAR,GAAiB,CAAjB,GAAqB,CAAlC;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAApB,EAA4B,EAAE,CAA9B,EAAiC;AAC7B,gBAAI,MAAM,QAAQ,SAAS,CAAjB,CAAV;AACA,gBAAI,QAAQ,QAAQ,CAAR,CAAZ;AACA,gBAAI,GAAJ,CAAQ,GAAR,EAAa,KAAb;AACH;AACD,eAAO,GAAP;AACH,KATD;;AAWA,aAAS,sBAAT,CAAgC,GAAhC,EAAqC;AACjC,YAAI,QAAQ,KAAZ;AACA,YAAI,OAAJ;AACA,YAAI,WAAW,SAAX,IAAwB,eAAe,MAA3C,EAAmD;AAC/C,sBAAU,aAAa,GAAb,CAAV;AACA,oBAAQ,IAAR;AACH,SAHD,MAGO;AACH,gBAAI,OAAO,IAAI,IAAJ,CAAS,GAAT,CAAX;AACA,gBAAI,MAAM,KAAK,MAAf;AACA,sBAAU,IAAI,KAAJ,CAAU,MAAM,CAAhB,CAAV;AACA,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,EAAE,CAA3B,EAA8B;AAC1B,oBAAI,MAAM,KAAK,CAAL,CAAV;AACA,wBAAQ,CAAR,IAAa,IAAI,GAAJ,CAAb;AACA,wBAAQ,IAAI,GAAZ,IAAmB,GAAnB;AACH;AACJ;AACD,aAAK,YAAL,CAAkB,OAAlB;AACA,aAAK,MAAL,GAAc,KAAd;AACA,aAAK,MAAL,CAAY,SAAZ,EAAuB,CAAC,CAAxB;AACH;AACD,SAAK,QAAL,CAAc,sBAAd,EAAsC,YAAtC;;AAEA,2BAAuB,SAAvB,CAAiC,KAAjC,GAAyC,YAAY,CAAE,CAAvD;;AAEA,2BAAuB,SAAvB,CAAiC,iBAAjC,GAAqD,UAAU,KAAV,EAAiB,KAAjB,EAAwB;AACzE,aAAK,OAAL,CAAa,KAAb,IAAsB,KAAtB;AACA,YAAI,gBAAgB,EAAE,KAAK,cAA3B;AACA,YAAI,iBAAiB,KAAK,OAA1B,EAAmC;AAC/B,gBAAI,GAAJ;AACA,gBAAI,KAAK,MAAT,EAAiB;AACb,sBAAM,aAAa,KAAK,OAAlB,CAAN;AACH,aAFD,MAEO;AACH,sBAAM,EAAN;AACA,oBAAI,YAAY,KAAK,MAAL,EAAhB;AACA,qBAAK,IAAI,IAAI,CAAR,EAAW,MAAM,KAAK,MAAL,EAAtB,EAAqC,IAAI,GAAzC,EAA8C,EAAE,CAAhD,EAAmD;AAC/C,wBAAI,KAAK,OAAL,CAAa,IAAI,SAAjB,CAAJ,IAAmC,KAAK,OAAL,CAAa,CAAb,CAAnC;AACH;AACJ;AACD,iBAAK,QAAL,CAAc,GAAd;AACA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KAlBD;;AAoBA,2BAAuB,SAAvB,CAAiC,gBAAjC,GAAoD,YAAY;AAC5D,eAAO,KAAP;AACH,KAFD;;AAIA,2BAAuB,SAAvB,CAAiC,eAAjC,GAAmD,UAAU,GAAV,EAAe;AAC9D,eAAO,OAAO,CAAd;AACH,KAFD;;AAIA,aAAS,KAAT,CAAe,QAAf,EAAyB;AACrB,YAAI,GAAJ;AACA,YAAI,YAAY,oBAAoB,QAApB,CAAhB;;AAEA,YAAI,CAAC,SAAS,SAAT,CAAL,EAA0B;AACtB,mBAAO,aAAa,2EAAb,CAAP;AACH,SAFD,MAEO,IAAI,qBAAqB,OAAzB,EAAkC;AACrC,kBAAM,UAAU,KAAV,CACF,QAAQ,KADN,EACa,SADb,EACwB,SADxB,EACmC,SADnC,EAC8C,SAD9C,CAAN;AAEH,SAHM,MAGA;AACH,kBAAM,IAAI,sBAAJ,CAA2B,SAA3B,EAAsC,OAAtC,EAAN;AACH;;AAED,YAAI,qBAAqB,OAAzB,EAAkC;AAC9B,gBAAI,cAAJ,CAAmB,SAAnB,EAA8B,CAA9B;AACH;AACD,eAAO,GAAP;AACH;;AAED,YAAQ,SAAR,CAAkB,KAAlB,GAA0B,YAAY;AAClC,eAAO,MAAM,IAAN,CAAP;AACH,KAFD;;AAIA,YAAQ,KAAR,GAAgB,UAAU,QAAV,EAAoB;AAChC,eAAO,MAAM,QAAN,CAAP;AACH,KAFD;AAGC,CApHD","file":"props-compiled.js","sourcesContent":["\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\nvar isObject = util.isObject;\nvar es5 = require(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n"]}