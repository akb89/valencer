{"version":3,"sources":["test.js"],"names":[],"mappings":"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","file":"test-compiled.js","sourcesContent":["var clone = require('./');\n\nfunction inspect(obj) {\n  seen = [];\n  return JSON.stringify(obj, function (key, val) {\n    if (val != null && typeof val == \"object\") {\n      if (seen.indexOf(val) >= 0) {\n        return '[cyclic]';\n      }\n\n      seen.push(val);\n    }\n\n    return val;\n  });\n}\n\n// Creates a new VM in node, or an iframe in a browser in order to run the\n// script\nfunction apartContext(context, script, callback) {\n  var vm = require('vm');\n\n  if (vm) {\n    var ctx = vm.createContext({ ctx: context });\n    callback(vm.runInContext(script, ctx));\n  } else if (document && document.createElement) {\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);\n\n    var myCtxId = 'tmpCtx' + Math.random();\n\n    window[myCtxId] = context;\n    iframe.src = 'test-apart-ctx.html?' + myCtxId + '&' + encodeURIComponent(script);\n    iframe.onload = function() {\n      try {\n        callback(iframe.contentWindow.results);\n      } catch (e) {\n        throw e;\n      }\n    };\n  } else {\n    console.log('WARNING: cannot create an apart context.');\n  }\n}\n\nexports[\"clone string\"] = function (test) {\n  test.expect(2); // how many tests?\n\n  var a = \"foo\";\n  test.strictEqual(clone(a), a);\n  a = \"\";\n  test.strictEqual(clone(a), a);\n\n  test.done();\n};\n\nexports[\"clone number\"] = function (test) {\n  test.expect(5); // how many tests?\n\n  var a = 0;\n  test.strictEqual(clone(a), a);\n  a = 1;\n  test.strictEqual(clone(a), a);\n  a = -1000;\n  test.strictEqual(clone(a), a);\n  a = 3.1415927;\n  test.strictEqual(clone(a), a);\n  a = -3.1415927;\n  test.strictEqual(clone(a), a);\n\n  test.done();\n};\n\nexports[\"clone date\"] = function (test) {\n  test.expect(3); // how many tests?\n\n  var a = new Date;\n  var c = clone(a);\n  test.ok(!!a.getUTCDate && !!a.toUTCString);\n  test.ok(!!c.getUTCDate && !!c.toUTCString);\n  test.equal(a.getTime(), c.getTime());\n\n  test.done();\n};\n\nexports[\"clone object\"] = function (test) {\n  test.expect(1); // how many tests?\n\n  var a = { foo: { bar: \"baz\" } };\n  var b = clone(a);\n\n  test.deepEqual(b, a);\n\n  test.done();\n};\n\nexports[\"clone array\"] = function (test) {\n  test.expect(2); // how many tests?\n\n  var a = [\n    { foo: \"bar\" },\n    \"baz\"\n  ];\n  var b = clone(a);\n\n  test.ok(b instanceof Array);\n  test.deepEqual(b, a);\n\n  test.done();\n};\n\nexports[\"clone buffer\"] = function (test) {\n  if (typeof Buffer == 'undefined') {\n    return test.done();\n  }\n\n  test.expect(1);\n\n  var a = new Buffer(\"this is a test buffer\");\n  var b = clone(a);\n\n  // no underscore equal since it has no concept of Buffers\n  test.deepEqual(b, a);\n  test.done();\n};\n\nexports[\"clone regexp\"] = function (test) {\n  test.expect(5);\n\n  var a = /abc123/gi;\n  var b = clone(a);\n  test.deepEqual(b, a);\n\n  var c = /a/g;\n  test.ok(c.lastIndex === 0);\n\n  c.exec('123a456a');\n  test.ok(c.lastIndex === 4);\n\n  var d = clone(c);\n  test.ok(d.global);\n  test.ok(d.lastIndex === 4);\n\n  test.done();\n};\n\nexports[\"clone object containing array\"] = function (test) {\n  test.expect(1); // how many tests?\n\n  var a = {\n    arr1: [ { a: '1234', b: '2345' } ],\n    arr2: [ { c: '345', d: '456' } ]\n  };\n\n  var b = clone(a);\n\n  test.deepEqual(b, a);\n\n  test.done();\n};\n\nexports[\"clone object with circular reference\"] = function (test) {\n  test.expect(8); // how many tests?\n\n  var c = [1, \"foo\", {'hello': 'bar'}, function () {}, false, [2]];\n  var b = [c, 2, 3, 4];\n\n  var a = {'b': b, 'c': c};\n  a.loop = a;\n  a.loop2 = a;\n  c.loop = c;\n  c.aloop = a;\n\n  var aCopy = clone(a);\n  test.ok(a != aCopy);\n  test.ok(a.c != aCopy.c);\n  test.ok(aCopy.c == aCopy.b[0]);\n  test.ok(aCopy.c.loop.loop.aloop == aCopy);\n  test.ok(aCopy.c[0] == a.c[0]);\n\n  test.ok(eq(a, aCopy));\n  aCopy.c[0] = 2;\n  test.ok(!eq(a, aCopy));\n  aCopy.c = \"2\";\n  test.ok(!eq(a, aCopy));\n\n  function eq(x, y) {\n    return inspect(x) === inspect(y);\n  }\n\n  test.done();\n};\n\nexports['clone prototype'] = function (test) {\n  test.expect(3); // how many tests?\n\n  var a = {\n    a: \"aaa\",\n    x: 123,\n    y: 45.65\n  };\n  var b = clone.clonePrototype(a);\n\n  test.strictEqual(b.a, a.a);\n  test.strictEqual(b.x, a.x);\n  test.strictEqual(b.y, a.y);\n\n  test.done();\n};\n\nexports['clone within an apart context'] = function (test) {\n  var results = apartContext({ clone: clone },\n      \"results = ctx.clone({ a: [1, 2, 3], d: new Date(), r: /^foo$/ig })\",\n      function (results) {\n    test.ok(results.a.constructor.toString() === Array.toString());\n    test.ok(results.d.constructor.toString() === Date.toString());\n    test.ok(results.r.constructor.toString() === RegExp.toString());\n    test.done();\n  });\n};\n\nexports['clone object with no constructor'] = function (test) {\n  test.expect(3);\n\n  var n = null;\n\n  var a = { foo: 'bar' };\n  a.__proto__ = n;\n  test.ok(typeof a === 'object');\n  test.ok(typeof a !== null);\n\n  var b = clone(a);\n  test.ok(a.foo, b.foo);\n\n  test.done();\n};\n\nexports['clone object with depth argument'] = function (test) {\n  test.expect(6);\n\n  var a = {\n    foo: {\n      bar : {\n        baz : 'qux'\n      }\n    }\n  };\n\n  var b = clone(a, false, 1);\n  test.deepEqual(b, a);\n  test.notEqual(b, a);\n  test.strictEqual(b.foo, a.foo);\n\n  b = clone(a, true, 2);\n  test.deepEqual(b, a);\n  test.notEqual(b.foo, a.foo);\n  test.strictEqual(b.foo.bar, a.foo.bar);\n\n  test.done();\n};\n\nexports['maintain prototype chain in clones'] = function (test) {\n  test.expect(1);\n\n  function T() {}\n\n  var a = new T();\n  var b = clone(a);\n  test.strictEqual(Object.getPrototypeOf(a), Object.getPrototypeOf(b));\n\n  test.done();\n};\n\nexports['parent prototype is overriden with prototype provided'] = function (test) {\n  test.expect(1);\n\n  function T() {}\n\n  var a = new T();\n  var b = clone(a, true, Infinity, null);\n  test.strictEqual(b.__defineSetter__, undefined);\n\n  test.done();\n};\n\nexports['clone object with null children'] = function (test) {\n  test.expect(1);\n  var a = {\n    foo: {\n      bar: null,\n      baz: {\n        qux: false\n      }\n    }\n  };\n\n  var b = clone(a);\n\n  test.deepEqual(b, a);\n  test.done();\n};\n\nexports['clone instance with getter'] = function (test) {\n  test.expect(1);\n  function Ctor() {};\n  Object.defineProperty(Ctor.prototype, 'prop', {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      return 'value';\n    }\n  });\n\n  var a = new Ctor();\n  var b = clone(a);\n\n  test.strictEqual(b.prop, 'value');\n  test.done();\n};\n\nexports['get RegExp flags'] = function (test) {\n  test.strictEqual(clone.__getRegExpFlags(/a/),   ''  );\n  test.strictEqual(clone.__getRegExpFlags(/a/i),  'i' );\n  test.strictEqual(clone.__getRegExpFlags(/a/g),  'g' );\n  test.strictEqual(clone.__getRegExpFlags(/a/gi), 'gi');\n  test.strictEqual(clone.__getRegExpFlags(/a/m),  'm' );\n\n  test.done();\n};\n\nexports[\"recognize Array object\"] = function (test) {\n  var results = apartContext(null, \"results = [1, 2, 3]\", function(alien) {\n    var local = [4, 5, 6];\n    test.ok(clone.__isArray(alien)); // recognize in other context.\n    test.ok(clone.__isArray(local)); // recognize in local context.\n    test.ok(!clone.__isDate(alien));\n    test.ok(!clone.__isDate(local));\n    test.ok(!clone.__isRegExp(alien));\n    test.ok(!clone.__isRegExp(local));\n    test.done();\n  });\n};\n\nexports[\"recognize Date object\"] = function (test) {\n  var results = apartContext(null, \"results = new Date()\", function(alien) {\n    var local = new Date();\n\n    test.ok(clone.__isDate(alien)); // recognize in other context.\n    test.ok(clone.__isDate(local)); // recognize in local context.\n    test.ok(!clone.__isArray(alien));\n    test.ok(!clone.__isArray(local));\n    test.ok(!clone.__isRegExp(alien));\n    test.ok(!clone.__isRegExp(local));\n\n    test.done();\n  });\n};\n\nexports[\"recognize RegExp object\"] = function (test) {\n  var results = apartContext(null, \"results = /foo/\", function(alien) {\n    var local = /bar/;\n\n    test.ok(clone.__isRegExp(alien)); // recognize in other context.\n    test.ok(clone.__isRegExp(local)); // recognize in local context.\n    test.ok(!clone.__isArray(alien));\n    test.ok(!clone.__isArray(local));\n    test.ok(!clone.__isDate(alien));\n    test.ok(!clone.__isDate(local));\n    test.done();\n  });\n};\n"]}