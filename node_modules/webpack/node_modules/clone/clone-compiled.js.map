{"version":3,"sources":["clone.js"],"names":[],"mappings":"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","file":"clone-compiled.js","sourcesContent":["var clone = (function() {\n'use strict';\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n*/\nfunction clone(parent, circular, depth, prototype) {\n  var filter;\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    filter = circular.filter;\n    circular = circular.circular\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth == 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      child = new Buffer(parent.length);\n      parent.copy(child);\n      return child;\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n};\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n};\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n};\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n};\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n};\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n"]}