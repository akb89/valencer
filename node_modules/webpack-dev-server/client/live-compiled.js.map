{"version":3,"sources":["live.js"],"names":[],"mappings":"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","file":"live-compiled.js","sourcesContent":["var $ = require(\"jquery\");\r\nvar SockJS = require(\"sockjs-client\");\r\nvar stripAnsi = require('strip-ansi');\r\nrequire(\"./style.css\");\r\n\r\nvar sock = null;\r\nvar hot = false;\r\nvar currentHash = \"\";\r\n\r\nvar newConnection = function(handlers) {\r\n\tsock = new SockJS('/sockjs-node');\r\n\r\n\tsock.onclose = function() {\r\n\t\thandlers.close();\r\n\r\n\t\t// Try to reconnect.\r\n\t\tsock = null;\r\n\t\tsetTimeout(function () {\r\n\t\t\tnewConnection(handlers);\r\n\t\t}, 2000);\r\n\t};\r\n\r\n\tsock.onmessage = function(e) {\r\n\t\t// This assumes that all data sent via the websocket is JSON.\r\n\t\tvar msg = JSON.parse(e.data);\r\n\t\thandlers[msg.type](msg.data);\r\n\t};\r\n};\r\n\r\n$(function() {\r\n\tvar body = $(\"body\").html(require(\"./page.jade\")());\r\n\tvar status = $(\"#status\");\r\n\tvar okness = $(\"#okness\");\r\n\tvar $errors = $(\"#errors\");\r\n\tvar iframe = $(\"#iframe\");\r\n\tvar header = $(\".header\");\r\n\r\n\tvar contentPage = window.location.pathname.substr(\"/webpack-dev-server\".length) + window.location.search;\r\n\r\n\tstatus.text(\"Connecting to sockjs server...\");\r\n\t$errors.hide(); iframe.hide();\r\n\theader.css({borderColor: \"#96b5b4\"});\r\n\r\n\tvar onSocketMsg = {\r\n\t\thot: function() {\r\n\t\t\thot = true;\r\n\t\t\tiframe.attr(\"src\", contentPage + window.location.hash);\r\n\t\t},\r\n\t\tinvalid: function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\tstatus.text(\"App updated. Recompiling...\");\r\n\t\t\theader.css({borderColor: \"#96b5b4\"});\r\n\t\t\t$errors.hide(); if(!hot) iframe.hide();\r\n\t\t},\r\n\t\thash: function(hash) {\r\n\t\t\tcurrentHash = hash;\r\n\t\t},\r\n\t\t\"still-ok\": function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\tstatus.text(\"App ready.\");\r\n\t\t\theader.css({borderColor: \"\"});\r\n\t\t\t$errors.hide(); if(!hot) iframe.show();\r\n\t\t},\r\n\t\tok: function() {\r\n\t\t\tokness.text(\"\");\r\n\t\t\t$errors.hide();\r\n\t\t\treloadApp();\r\n\t\t},\r\n\t\twarnings: function(warnings) {\r\n\t\t\tokness.text(\"Warnings while compiling.\");\r\n\t\t\t$errors.hide();\r\n\t\t\treloadApp();\r\n\t\t},\r\n\t\terrors: function(errors) {\r\n\t\t\tstatus.text(\"App updated with errors. No reload!\");\r\n\t\t\tokness.text(\"Errors while compiling.\");\r\n\t\t\t$errors.text(\"\\n\" + stripAnsi(errors.join(\"\\n\\n\\n\")) + \"\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t},\r\n\t\t\"proxy-error\": function(errors) {\r\n\t\t\tstatus.text(\"Could not proxy to content base target!\");\r\n\t\t\tokness.text(\"Proxy error.\");\r\n\t\t\t$errors.text(\"\\n\" + stripAnsi(errors.join(\"\\n\\n\\n\")) + \"\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t},\r\n\t\tclose: function() {\r\n\t\t\tstatus.text(\"\");\r\n\t\t\tokness.text(\"Disconnected.\");\r\n\t\t\t$errors.text(\"\\n\\n\\n  Lost connection to webpack-dev-server.\\n  Please restart the server to reestablish connection...\\n\\n\\n\\n\");\r\n\t\t\theader.css({borderColor: \"#ebcb8b\"});\r\n\t\t\t$errors.show(); iframe.hide();\r\n\t\t}\r\n\t};\r\n\r\n\tnewConnection(onSocketMsg);\r\n\r\n\tiframe.load(function() {\r\n\t\tstatus.text(\"App ready.\");\r\n\t\theader.css({borderColor: \"\"});\r\n\t\tiframe.show();\r\n\t});\r\n\r\n\tfunction reloadApp() {\r\n\t\tif(hot) {\r\n\t\t\tstatus.text(\"App hot update.\");\r\n\t\t\ttry {\r\n\t\t\t\tiframe[0].contentWindow.postMessage(\"webpackHotUpdate\" + currentHash, \"*\");\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.warn(e);\r\n\t\t\t}\r\n\t\t\tiframe.show();\r\n\t\t} else {\r\n\t\t\tstatus.text(\"App updated. Reloading app...\");\r\n\t\t\theader.css({borderColor: \"#96b5b4\"});\r\n\t\t\ttry {\r\n\t\t\t\tvar old = iframe[0].contentWindow.location + \"\";\r\n\t\t\t\tif(old.indexOf(\"about\") == 0) old = null;\r\n\t\t\t\tiframe.attr(\"src\", old || (contentPage + window.location.hash));\r\n\t\t\t\told && iframe[0].contentWindow.location.reload();\r\n\t\t\t} catch(e) {\r\n\t\t\t\tiframe.attr(\"src\", contentPage + window.location.hash);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n"]}