{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;AAKA,OAAO,OAAP,GAAiB,KAAjB;;;;;;;;;;;;;;;AAeA,SAAS,KAAT,CAAe,GAAf,EAAoB,GAApB,EAAyB;;AAEvB,MAAI,cAAc,IAAlB;AACA,MAAI,cAAc,IAAlB;;;AAGA,MAAI,gBAAgB,IAAI,mBAAJ,CAApB;AACA,MAAI,YAAY,IAAI,eAAJ,CAAhB;AACA,MAAI,eAAe,IAAI,eAAJ,CAAnB;AACA,MAAI,OAAO,IAAI,MAAJ,CAAX;AACA,MAAI,KAAK,IAAI,eAAJ,CAAT;;;AAGA,MAAI,CAAC,aAAD,IAAkB,CAAC,SAAvB,EAAkC,OAAO,KAAP;;;AAGlC,MAAI,MAAM,GAAG,OAAH,CAAW,UAAX,MAA2B,CAAC,CAAtC,EAAyC,OAAO,KAAP;;;AAGzC,MAAI,SAAJ,EAAe,YAAY,UAAU,KAAV,CAAgB,OAAhB,CAAZ;;;AAGf,MAAI,SAAJ,EAAe;AACb,kBAAc,UAAU,IAAV,CAAe,UAAU,KAAV,EAAiB;AAC5C,aAAO,UAAU,GAAV,IAAiB,UAAU,IAA3B,IAAmC,UAAU,OAAO,IAA3D;AACD,KAFa,CAAd;AAGD;;;AAGD,MAAI,aAAJ,EAAmB;AACjB,oBAAgB,IAAI,IAAJ,CAAS,aAAT,CAAhB;AACA,mBAAe,IAAI,IAAJ,CAAS,YAAT,CAAf;AACA,kBAAc,gBAAgB,aAA9B;AACD;;AAED,SAAO,CAAC,EAAG,eAAe,WAAlB,CAAR;AACD","file":"index-compiled.js","sourcesContent":["\n/**\n * Expose `fresh()`.\n */\n\nmodule.exports = fresh;\n\n/**\n * Check freshness of `req` and `res` headers.\n *\n * When the cache is \"fresh\" __true__ is returned,\n * otherwise __false__ is returned to indicate that\n * the cache is now stale.\n *\n * @param {Object} req\n * @param {Object} res\n * @return {Boolean}\n * @api public\n */\n\nfunction fresh(req, res) {\n  // defaults\n  var etagMatches = true;\n  var notModified = true;\n\n  // fields\n  var modifiedSince = req['if-modified-since'];\n  var noneMatch = req['if-none-match'];\n  var lastModified = res['last-modified'];\n  var etag = res['etag'];\n  var cc = req['cache-control'];\n\n  // unconditional request\n  if (!modifiedSince && !noneMatch) return false;\n\n  // check for no-cache cache request directive\n  if (cc && cc.indexOf('no-cache') !== -1) return false;  \n\n  // parse if-none-match\n  if (noneMatch) noneMatch = noneMatch.split(/ *, */);\n\n  // if-none-match\n  if (noneMatch) {\n    etagMatches = noneMatch.some(function (match) {\n      return match === '*' || match === etag || match === 'W/' + etag;\n    });\n  }\n\n  // if-modified-since\n  if (modifiedSince) {\n    modifiedSince = new Date(modifiedSince);\n    lastModified = new Date(lastModified);\n    notModified = lastModified <= modifiedSince;\n  }\n\n  return !! (etagMatches && notModified);\n}\n"]}