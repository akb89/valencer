{"version":3,"sources":["autobahn_client.js"],"names":[],"mappings":"AAAA,IAAI,YAAY,QAAQ,IAAR,EAAc,MAA9B;IACI,UAAY,QAAQ,oBAAR,CADhB;IAEI,OAAY,QAAQ,MAAR,CAFhB;;AAIA,IAAI,OAAU,qBAAd;IACI,QAAU,mBAAmB,UAAU,QAAQ,OAArC,CADd;IAEI,QAAU,CAFd;IAGI,UAAU,EAAC,YAAY,CAAC,OAAD,CAAb,EAHd;;AAKA,IAAI,SAAS,IAAI,SAAJ,CAAc,OAAO,eAArB,CAAb;IACI,GADJ;IACS,QADT;;AAGA,OAAO,SAAP,GAAmB,UAAS,KAAT,EAAgB;AACjC,UAAQ,GAAR,CAAY,yBAAyB,MAAM,IAA3C;AACA,UAAQ,SAAS,MAAM,IAAf,CAAR;AACA,aAAW,KAAK,KAAL,CAAX;AACD,CAJD;;AAMA,IAAI,UAAU,UAAS,CAAT,EAAY;AACxB,MAAI,IAAI,KAAR,EAAe;AACb,UAAM,OAAO,uBAAP,GAAiC,KAAvC;AACA,aAAS,IAAI,SAAJ,CAAc,GAAd,CAAT;AACA,WAAO,OAAP,GAAiB,QAAQ,IAAzB;AACA;AACD;;AAED,QAAM,OAAO,gBAAP,GAA0B,CAA1B,GAA8B,SAA9B,GAA0C,KAAhD;AACA,WAAS,IAAI,SAAJ,CAAc,GAAd,EAAmB,EAAnB,EAAuB,OAAvB,CAAT;AACA,SAAO,IAAP,CAAY,MAAZ;;AAEA,SAAO,EAAP,CAAU,OAAV,EAAmB,YAAW;AAC5B,aAAS,EAAT;AACA,YAAQ,IAAI,CAAZ;AACD,GAHD;AAID,CAhBD;;AAkBA,OAAO,OAAP,GAAiB,YAAW;AAC1B,UAAQ,CAAR;AACD,CAFD","file":"autobahn_client-compiled.js","sourcesContent":["var WebSocket = require('..').Client,\n    deflate   = require('permessage-deflate'),\n    pace      = require('pace');\n\nvar host    = 'ws://localhost:9001',\n    agent   = encodeURIComponent('node-' + process.version),\n    cases   = 0,\n    options = {extensions: [deflate]};\n\nvar socket = new WebSocket(host + '/getCaseCount'),\n    url, progress;\n\nsocket.onmessage = function(event) {\n  console.log('Total cases to run: ' + event.data);\n  cases = parseInt(event.data);\n  progress = pace(cases);\n};\n\nvar runCase = function(n) {\n  if (n > cases) {\n    url = host + '/updateReports?agent=' + agent;\n    socket = new WebSocket(url);\n    socket.onclose = process.exit;\n    return;\n  }\n\n  url = host + '/runCase?case=' + n + '&agent=' + agent;\n  socket = new WebSocket(url, [], options);\n  socket.pipe(socket);\n\n  socket.on('close', function() {\n    progress.op();\n    runCase(n + 1);\n  });\n};\n\nsocket.onclose = function() {\n  runCase(1);\n};\n"]}