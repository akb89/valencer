{"version":3,"sources":["info-ajax.js"],"names":[],"mappings":"AAAA;;AAEA,IAAI,eAAe,QAAQ,QAAR,EAAkB,YAArC;IACI,WAAW,QAAQ,UAAR,CADf;IAEI,QAAQ,QAAQ,OAAR,CAFZ;IAGI,cAAc,QAAQ,gBAAR,CAHlB;;AAMA,IAAI,QAAQ,YAAW,CAAE,CAAzB;AACA,IAAI,QAAQ,GAAR,CAAY,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,UAAQ,QAAQ,OAAR,EAAiB,yBAAjB,CAAR;AACD;;AAED,SAAS,QAAT,CAAkB,GAAlB,EAAuB,UAAvB,EAAmC;AACjC,eAAa,IAAb,CAAkB,IAAlB;;AAEA,MAAI,OAAO,IAAX;AACA,MAAI,KAAK,CAAC,IAAI,IAAJ,EAAV;AACA,OAAK,EAAL,GAAU,IAAI,UAAJ,CAAe,KAAf,EAAsB,GAAtB,CAAV;;AAEA,OAAK,EAAL,CAAQ,IAAR,CAAa,QAAb,EAAuB,UAAS,MAAT,EAAiB,IAAjB,EAAuB;AAC5C,QAAI,IAAJ,EAAU,GAAV;AACA,QAAI,WAAW,GAAf,EAAoB;AAClB,YAAO,CAAC,IAAI,IAAJ,EAAF,GAAgB,EAAtB;AACA,UAAI,IAAJ,EAAU;AACR,YAAI;AACF,iBAAO,MAAM,KAAN,CAAY,IAAZ,CAAP;AACD,SAFD,CAEE,OAAO,CAAP,EAAU;AACV,gBAAM,UAAN,EAAkB,IAAlB;AACD;AACF;;AAED,UAAI,CAAC,YAAY,QAAZ,CAAqB,IAArB,CAAL,EAAiC;AAC/B,eAAO,EAAP;AACD;AACF;AACD,SAAK,IAAL,CAAU,QAAV,EAAoB,IAApB,EAA0B,GAA1B;AACA,SAAK,kBAAL;AACD,GAlBD;AAmBD;;AAED,SAAS,QAAT,EAAmB,YAAnB;;AAEA,SAAS,SAAT,CAAmB,KAAnB,GAA2B,YAAW;AACpC,OAAK,kBAAL;AACA,OAAK,EAAL,CAAQ,KAAR;AACD,CAHD;;AAKA,OAAO,OAAP,GAAiB,QAAjB","file":"info-ajax-compiled.js","sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n"]}