{"version":3,"sources":["middleware.js"],"names":[],"mappings":"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","file":"middleware-compiled.js","sourcesContent":["/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar MemoryFileSystem = require(\"memory-fs\");\r\nvar mime = require(\"mime\");\r\nvar parseRange = require(\"range-parser\");\r\n\r\nvar HASH_REGEXP = /[0-9a-f]{10,}/;\r\n\r\n// constructor for the middleware\r\nmodule.exports = function(compiler, options) {\r\n\tif(!options) options = {};\r\n\tif(typeof options.watchOptions === \"undefined\") options.watchOptions = {};\r\n\tif(typeof options.watchDelay !== \"undefined\") {\r\n\t\t// TODO remove this in next major version\r\n\t\tconsole.warn(\"options.watchDelay is deprecated: Use 'options.watchOptions.aggregateTimeout' instead\");\r\n\t\toptions.watchOptions.aggregateTimeout = options.watchDelay;\r\n\t}\r\n\tif(typeof options.watchOptions.aggregateTimeout === \"undefined\") options.watchOptions.aggregateTimeout = 200;\r\n\tif(typeof options.stats === \"undefined\") options.stats = {};\r\n\tif(!options.stats.context) options.stats.context = process.cwd();\r\n\tif(options.lazy) {\r\n\t\tif(typeof options.filename === \"string\") {\r\n\t\t\tvar str = options.filename\r\n\t\t\t\t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\")\r\n\t\t\t\t.replace(/\\\\\\[[a-z]+\\\\\\]/ig, \".+\");\r\n\t\t\toptions.filename = new RegExp(\"^[\\/]{0,1}\" + str + \"$\");\r\n\t\t}\r\n\t}\r\n\r\n\t// store our files in memory\r\n\tvar files = {};\r\n\tvar fs = compiler.outputFileSystem = new MemoryFileSystem();\r\n\r\n\tcompiler.plugin(\"done\", function(stats) {\r\n\t\t// We are now on valid state\r\n\t\tstate = true;\r\n\t\t// Do the stuff in nextTick, because bundle may be invalidated\r\n\t\t//  if a change happend while compiling\r\n\t\tprocess.nextTick(function() {\r\n\t\t\t// check if still in valid state\r\n\t\t\tif(!state) return;\r\n\t\t\t// print webpack output\r\n\t\t\tvar displayStats = (!options.quiet && options.stats !== false);\r\n\t\t\tif(displayStats &&\r\n\t\t\t\t!(stats.hasErrors() || stats.hasWarnings()) &&\r\n\t\t\t\toptions.noInfo)\r\n\t\t\t\tdisplayStats = false;\r\n\t\t\tif(displayStats) {\r\n\t\t\t\tconsole.log(stats.toString(options.stats));\r\n\t\t\t}\r\n\t\t\tif (!options.noInfo && !options.quiet)\r\n\t\t\t\tconsole.info(\"webpack: bundle is now VALID.\");\r\n\r\n\t\t\t// execute callback that are delayed\r\n\t\t\tvar cbs = callbacks;\r\n\t\t\tcallbacks = [];\r\n\t\t\tcbs.forEach(function continueBecauseBundleAvailible(cb) {\r\n\t\t\t\tcb();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// In lazy mode, we may issue another rebuild\r\n\t\tif(forceRebuild) {\r\n\t\t\tforceRebuild = false;\r\n\t\t\trebuild();\r\n\t\t}\r\n\t});\r\n\r\n\t// on compiling\r\n\tfunction invalidPlugin() {\r\n\t\tif(state && (!options.noInfo && !options.quiet))\r\n\t\t\tconsole.info(\"webpack: bundle is now INVALID.\");\r\n\t\t// We are now in invalid state\r\n\t\tstate = false;\r\n\t}\r\n\tfunction invalidAsyncPlugin(compiler, callback) {\r\n\t\tinvalidPlugin();\r\n\t\tcallback();\r\n\t}\r\n\tcompiler.plugin(\"invalid\", invalidPlugin);\r\n\tcompiler.plugin(\"watch-run\", invalidAsyncPlugin);\r\n\tcompiler.plugin(\"run\", invalidAsyncPlugin);\r\n\r\n\t// the state, false: bundle invalid, true: bundle valid\r\n\tvar state = false;\r\n\r\n\t// in lazy mode, rebuild automatically\r\n\tvar forceRebuild = false;\r\n\r\n\t// delayed callback\r\n\tvar callbacks = [];\r\n\r\n\t// wait for bundle valid\r\n\tfunction ready(fn, req) {\r\n\t\tif(state) return fn();\r\n\t\tif(!options.noInfo && !options.quiet)\r\n\t\t\tconsole.log(\"webpack: wait until bundle finished: \" + (req.url || fn.name));\r\n\t\tcallbacks.push(fn);\r\n\t}\r\n\r\n\t// start watching\r\n\tif(!options.lazy) {\r\n\t\tvar watching = compiler.watch(options.watchOptions, function(err) {\r\n\t\t\tif(err) throw err;\r\n\t\t});\r\n\t} else {\r\n\t\tstate = true;\r\n\t}\r\n\r\n\tfunction rebuild() {\r\n\t\tif(state) {\r\n\t\t\tstate = false;\r\n\t\t\tcompiler.run(function(err) {\r\n\t\t\t\tif(err) throw err;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tforceRebuild = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction pathJoin(a, b) {\r\n\t\treturn a == \"/\" ? \"/\" + b : (a||\"\") + \"/\" + b\r\n\t}\r\n\r\n\tfunction getFilenameFromUrl(url) {\r\n\t\t// publicPrefix is the folder our bundle should be in\r\n\t\tvar localPrefix = options.publicPath || \"/\";\r\n\t\tif(url.indexOf(localPrefix) !== 0) {\r\n\t\t\tif(/^(https?:)?\\/\\//.test(localPrefix)) {\r\n\t\t\t\tlocalPrefix = \"/\" + localPrefix.replace(/^(https?:)?\\/\\/[^\\/]+\\//, \"\");\r\n\t\t\t\t// fast exit if another directory requested\r\n\t\t\t\tif(url.indexOf(localPrefix) !== 0) return false;\r\n\t\t\t} else return false;\r\n\t\t}\r\n\t\t// get filename from request\r\n\t\tvar filename = url.substr(localPrefix.length);\r\n\t\tif(filename.indexOf(\"?\") >= 0) {\r\n\t\t\tfilename = filename.substr(0, filename.indexOf(\"?\"));\r\n\t\t}\r\n\t\treturn filename ? pathJoin(compiler.outputPath, filename) : compiler.outputPath;\r\n\t}\r\n\r\n\tfunction handleRangeHeaders(content, req, res) {\r\n\t\tif (req.headers['Accept-Ranges']) res.setHeader('Accept-Ranges', 'bytes');\r\n\t\tif (req.headers.range) {\r\n\t\t\tvar ranges = parseRange(content.length, req.headers.range);\r\n\r\n\t\t\t// unsatisfiable\r\n\t\t\tif (-1 == ranges) {\r\n\t\t\t\tres.setHeader('Content-Range', 'bytes */' + content.length);\r\n\t\t\t\tres.statusCode = 416;\r\n\t\t\t\treturn content;\r\n\t\t\t}\r\n\r\n\t\t\t// valid (syntactically invalid/multiple ranges are treated as a regular response)\r\n\t\t\tif (-2 != ranges && ranges.length === 1) {\r\n\t\t\t\t// Content-Range\r\n\t\t\t\tres.statusCode = 206;\r\n\t\t\t\tvar length = content.length;\r\n\t\t\t\tres.setHeader(\r\n\t\t\t\t\t'Content-Range',\r\n\t\t\t\t\t'bytes ' + ranges[0].start + '-' + ranges[0].end + '/' + length\r\n\t\t\t\t);\r\n\r\n\t\t\t\tcontent = content.slice(ranges[0].start, ranges[0].end + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn content;\r\n\t}\r\n\r\n\t// The middleware function\r\n\tfunction webpackDevMiddleware(req, res, next) {\r\n\t\tvar filename = getFilenameFromUrl(req.url);\r\n\t\tif (filename === false) return next();\r\n\r\n\t\t// in lazy mode, rebuild on bundle request\r\n\t\tif(options.lazy && (!options.filename || options.filename.test(filename)))\r\n\t\t\trebuild();\r\n\r\n\t\tif(HASH_REGEXP.test(filename)) {\r\n\t\t\ttry {\r\n\t\t\t\tif(fs.statSync(filename).isFile()) {\r\n\t\t\t\t\tprocessRequest();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {}\r\n\t\t}\r\n\t\t// delay the request until we have a vaild bundle\r\n\t\tready(processRequest, req);\r\n\t\tfunction processRequest() {\r\n\t\t\ttry {\r\n\t\t\t\tvar stat = fs.statSync(filename);\r\n\t\t\t\tif(!stat.isFile()) {\r\n\t\t\t\t\tif (stat.isDirectory()) {\r\n\t\t\t\t\t\tfilename = pathJoin(filename, \"index.html\");\r\n\t\t\t\t\t\tstat = fs.statSync(filename);\r\n\t\t\t\t\t\tif(!stat.isFile()) throw \"next\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow \"next\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {\r\n\t\t\t\treturn next();\r\n\t\t\t}\r\n\r\n\t\t\t// server content\r\n\t\t\tvar content = fs.readFileSync(filename);\r\n\t\t\tcontent = handleRangeHeaders(content, req, res);\r\n\t\t\tres.setHeader(\"Access-Control-Allow-Origin\", \"*\"); // To support XHR, etc.\r\n\t\t\tres.setHeader(\"Content-Type\", mime.lookup(filename));\r\n\t\t\tres.setHeader(\"Content-Length\", content.length);\r\n\t\t\tif(options.headers) {\r\n\t\t\t\tfor(var name in options.headers) {\r\n\t\t\t\t\tres.setHeader(name, options.headers[name]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (res.send) res.send(content);\r\n\t\t\telse res.end(content);\r\n\t\t}\r\n\t}\r\n\r\n\twebpackDevMiddleware.getFilenameFromUrl = getFilenameFromUrl;\r\n\r\n\twebpackDevMiddleware.waitUntilValid = function(callback) {\r\n\t\tcallback = callback || function(){};\r\n\t\tif (!watching || !watching.running) callback();\r\n\t\telse ready(callback, {});\r\n\t};\r\n\r\n\twebpackDevMiddleware.invalidate = function(callback) {\r\n\t\tcallback = callback || function(){};\r\n\t\tif(watching) {\r\n\t\t\tready(callback, {});\r\n\t\t\twatching.invalidate();\r\n\t\t} else {\r\n\t\t\tcallback();\r\n\t\t}\r\n\t};\r\n\r\n\twebpackDevMiddleware.close = function(callback) {\r\n\t\tcallback = callback || function(){};\r\n\t\tif(watching) watching.close(callback);\r\n\t\telse callback();\r\n\t};\r\n\r\n\twebpackDevMiddleware.fileSystem = fs;\r\n\r\n\treturn webpackDevMiddleware;\r\n}\r\n"]}